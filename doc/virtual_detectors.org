#+startup:fold
* ------------------------------------------------------------------------------
* virtual detectors ID's in Mu2e Offline: https://github.com/Mu2e/Offline/blob/master/DataProducts/inc/VirtualDetectorId.hh
* positions and B-field values:                                              
|---------+--------------------------+----------------------------+---------------------------------+-------------------------------------------+-----------------------------------|
| VD code | VD name                  | Mu2e coordinates (X,Y,Z)   | parameters                      | magnetic field                            | comments                          |
|---------+--------------------------+----------------------------+---------------------------------+-------------------------------------------+-----------------------------------|
|       0 | unknown                  |                            |                                 |                                           |                                   |
|       1 | Coll1_In                 | ( 3904   , 0, -4003.99  )  | (0      240     0.01 0 6.28319) | -0.0025664921  0.0000000000  2.6654065869 | rmin, rmax, halk-thickbess, 0 2pi |
|       2 | Coll1_Out                | ( 3904   , 0, -3004.01  )  | (0      240     0.01 0 6.28319) | -0.0514412053  0.0000000000  2.3323854207 |                                   |
|       3 | Coll31_In                | (  824.99, 0,     0.0   )  | (0      240     0.01 0 6.28319) | -2.4372897636  0.0000000000  0.0595278574              |                                   |
|       4 | Coll31_Out               | (   25.01, 0,     0.0   )  | (0      240     0.01 0 6.28319) | -2.2161776882  0.0000000000  0.0180808598 |                                   |
|       5 | Coll32_In                | (  -25.01, 0,     0.0   )  | (0      240     0.01 0 6.28319) | -2.2062790647  0.0000000000  0.0180123218 |                                   |
|       6 | Coll32_Out               | ( -824.99, 0,     0.0   )  | (0      240     0.01 0 6.28319) | -2.0728912901  0.0000000000  0.0462245715 |                                   |
|       7 | Coll5_In                 | (-3904   , 0,  2930.01  )  | (0      240     0.01 0 6.28319) | -0.0820919919  0.0000000000  2.2018940819 |                                   |
|       8 | Coll5_Out                | (-3904   , 0,  3929.99  )  | (0      240     0.01 0 6.28319) | -0.0037951277 -0.0000000009  1.9332933694 |                                   |
|       9 | ST_In                    | (-3904   , 0,  5465.99  )  | (0      525.573 0.01 0 6.28319) | -0.0015110159  0.0000000002  1.5884002870 |                                   |
|      10 | ST_Out                   | (-3904   , 0,  6276.01  )  | (0      577.872 0.01 0 6.28319) | -0.0012163513  0.0000000001  1.3799065272 |                                   |
|      11 | TT_Mid                   | (-3904   , 0, 10181.1   )  | (376.9  810     0.01 0 6.28319) | -0.0005008896  0.0000000000  1.0144921331 |                                   |
|      12 | TT_MidInner              | (-3904   , 0, 10181.1   )  | (0      376.9   0.01 0 6.28319) | -0.0005008896  0.0000000000  1.0144921331 |                                   |
|      13 | TT_FrontHollow           | (-3904   , 0,  8539.89  )  | (0      850.1   0.01 0 6.28319) | -0.0007123887  0.0000000001  1.0290706581 |                                   |
|      14 | TT_FrontPA               | (-3904.00, 0,  8539.89  )  |                                 | -0.0007123887  0.0000000001  1.0290706581 |                                   |
|      15 | TT_Back                  | (-3904   , 0, 11810.1   )  | (0      850.1   0.01 0 6.28319) | -0.0003605673  0.0000000000  0.9970803162 |                                   |
|      16 | EMFC1Entrance            |                            |                                 |                                           |                                   |
|      17 | EMFC1Exit                |                            |                                 |                                           |                                   |
|      18 | EMFC2Entrance            |                            |                                 |                                           |                                   |
|      19 | EMFC2Exit                |                            |                                 |                                           |                                   |
|      20 | PS_FrontExit             |                            |                                 |                                           |                                   |
|      21 | EMIEntrance1             |                            |                                 |                                           |                                   |
|      22 | TT_OutSurf               | (-3904   , 0, 10175     )  | 850.1                           |                                           |                                   |
|      23 | TT_InSurf                | (-3904   , 0, 10175     )  | 376.9                           |                                           |                                   |
|      24 | EMIEntrance2             |                            |                                 |                                           |                                   |
|      25 | EMIC0Entrance            |                            |                                 |                                           |                                   |
|      26 | EMIC0Exit                |                            |                                 |                                           |                                   |
|      27 | EMIC1Entrance            |                            |                                 |                                           |                                   |
|      28 | EMIC1Exit                |                            |                                 |                                           |                                   |
|      29 | EMIC2Entrance            |                            |                                 |                                           |                                   |
|      30 | EMIC2Exit                |                            |                                 |                                           |                                   |
|      31 | EMIC3Entrance            |                            |                                 |                                           |                                   |
|      32 | EMIC3Exit                |                            |                                 |                                           |                                   |
|      33 | ExtMonCommonPlane        |                            |                                 |                                           |                                   |
|      34 | ProtonBeamDumpCoreFace   |                            |                                 |                                           |                                   |
|      35 | EMFDetectorUpEntrance    | (0      , 0  , 0   )       |                                 |                                           |                                   |
|      36 | EMFDetectorUpExit        | (0      , 0  , 0   )       |                                 |                                           |                                   |
|      37 | Coll5_OutSurf            | (-3904  , 0  , 3430)       |                                 |                                           |                                   |
|      38 | EMFDetectorDnEntrance    | (0      , 0  , 0   )       |                                 |                                           |                                   |
|      39 | EMFDetectorDnExit        | (0      , 0  , 0   )       |                                 |                                           |                                   |
|      40 | EMFBoxFront              |                            |                                 |                                           |                                   |
|      41 | EMFBoxSW                 |                            |                                 |                                           |                                   |
|      42 | EMFBoxBottom             |                            |                                 |                                           |                                   |
|      43 | EMFBoxBack               |                            |                                 |                                           |                                   |
|      44 | EMFBoxNE                 |                            |                                 |                                           |                                   |
|      45 | EMFBoxTop                |                            |                                 |                                           |                                   |
|      46 | IT_VD_EndCap_Front       |                            |                                 |                                           |                                   |
|      47 | IT_VD_EndCap_Back        |                            |                                 |                                           |                                   |
|      48 | IT_VD_InSurf             |                            |                                 |                                           |                                   |
|      49 | EMC_0_FrontIn            |                            |                                 |                                           |                                   |
|      50 | EMC_0_FrontOut           |                            |                                 |                                           |                                   |
|      51 | EMC_1_FrontIn            |                            |                                 |                                           |                                   |
|      52 | EMC_1_FrontOut           |                            |                                 |                                           |                                   |
|      53 | EMC_2_FrontIn            |                            |                                 |                                           |                                   |
|      54 | EMC_2_FrontOut           |                            |                                 |                                           |                                   |
|      55 | EMC_3_FrontIn            |                            |                                 |                                           |                                   |
|      56 | EMC_3_FrontOut           |                            |                                 |                                           |                                   |
|      57 | EMC_0_EdgeIn             |                            |                                 |                                           |                                   |
|      58 | EMC_0_EdgeOut            |                            |                                 |                                           |                                   |
|      59 | EMC_1_EdgeIn             |                            |                                 |                                           |                                   |
|      60 | EMC_1_EdgeOut            |                            |                                 |                                           |                                   |
|      61 | EMC_2_EdgeIn             |                            |                                 |                                           |                                   |
|      62 | EMC_2_EdgeOut            |                            |                                 |                                           |                                   |
|      63 | EMC_3_EdgeIn             |                            |                                 |                                           |                                   |
|      64 | EMC_3_EdgeOut            |                            |                                 |                                           |                                   |
|      65 | EMC_0_SurfIn             |                            |                                 |                                           |                                   |
|      66 | EMC_0_SurfOut            |                            |                                 |                                           |                                   |
|      67 | EMC_1_SurfIn             |                            |                                 |                                           |                                   |
|      68 | EMC_1_SurfOut            |                            |                                 |                                           |                                   |
|      69 | EMC_2_SurfIn             |                            |                                 |                                           |                                   |
|      70 | EMC_2_SurfOut            |                            |                                 |                                           |                                   |
|      71 | EMC_3_SurfIn             |                            |                                 |                                           |                                   |
|      72 | EMC_3_SurfOut            |                            |                                 |                                           |                                   |
|      73 | EMC_Disk_0_SurfIn        | (-3904.00, 0.00, 11841.96) |                                 |                                           |                                   |
|      74 | EMC_Disk_0_SurfOut       | (-3904.00, 0.00, 12230.63) |                                 |                                           |                                   |
|      75 | EMC_Disk_1_SurfIn        | (-3904.00, 0.00, 12541.96) |                                 |                                           |                                   |
|      76 | EMC_Disk_1_SurfOut       | (-3904.00, 0.00, 12930.63) |                                 |                                           |                                   |
|      77 | EMC_Disk_0_EdgeIn        | (-3904.00, 0.00, 12036.30) |                                 |                                           |                                   |
|      78 | EMC_Disk_0_EdgeOut       | (-3904.00, 0.00, 12036.30) |                                 |                                           |                                   |
|      79 | EMC_Disk_1_EdgeIn        | (-3904.00, 0.00, 12736.30) |                                 |                                           |                                   |
|      80 | EMC_Disk_1_EdgeOut       | (-3904.00, 0.00, 12736.30) |                                 |                                           |                                   |
|      81 | DSNeutronShieldExit      |                            |                                 |                                           |                                   |
|      82 | PSTargetSurf             |                            |                                 |                                           |                                   |
|      83 | PT_Front                 |                            |                                 |                                           |                                   |
|      84 | PT_Back                  |                            |                                 |                                           |                                   |
|      85 | STMUpstream              | (-3904.00, 0.00,  4881.49) |                                 |                                           |                                   |
|      86 | STM_UpStr                |                            |                                 |                                           |                                   |
|      87 | STM_MagDnStr             |                            |                                 |                                           |                                   |
|      88 | STM_CollDnStr            |                            |                                 |                                           |                                   |
|      89 | STM_Det1UpStr            |                            |                                 |                                           |                                   |
|      90 | STM_Det2UpStr            |                            |                                 |                                           |                                   |
|      91 | PSPbarIn                 | (3904.00,  0.00, -4145.02) | (0 200 0.01 0 6.28319)          |                                           |                                   |
|      92 | PSPbarOut                | (3904.00,  0.00, -4143.02) | (0 200 0.01 0 6.28319)          |                                           |                                   |
|      93 | CRV_R                    |                            |                                 |                                           |                                   |
|      94 | CRV_L                    |                            |                                 |                                           |                                   |
|      95 | CRV_T                    |                            |                                 |                                           |                                   |
|      96 | CRV_D                    |                            |                                 |                                           |                                   |
|      97 | CRV_U                    |                            |                                 |                                           |                                   |
|      98 | TS2_Bend                 | ( 3046.12, 0.00,  -857.88) | (0 240 0.01 0 6.28319)          | ( 2071.12,-2071.12, 0)                    |                                   |
|      99 | TS4_Bend                 | (-3046.12, 0.00,   857.88) | (0 240 0.01 0 6.28319)          | (-2071.12, 2071.12,-0)                    |                                   |
|     100 | STM_FieldOfViewCollDnStr |                            |                                 |                                           |                                   |
|     101 | STM_SpotSizeCollUpStr    |                            |                                 |                                           |                                   |
|     102 | EMC_FEB_0_SurfIn         | (-3904.00, 0.00, 11912.85) |                                 |                                           |                                   |
|     103 | EMC_FEB_0_SurfOut        | (-3904.00, 0.00, 12262.93) |                                 |                                           |                                   |
|     104 | EMC_FEB_1_SurfIn         | (-3904.00, 0.00, 12612.85) |                                 |                                           |                                   |
|     105 | EMC_FEB_1_SurfOut        | (-3904.00, 0.00, 12962.93) |                                 |                                           |                                   |
|     106 | EMC_FEB_0_EdgeIn         | (-3904.00, 0.00, 12087.89) |                                 |                                           |                                   |
|     107 | EMC_FEB_0_EdgeOut        | (-3904.00, 0.00, 12087.89) |                                 |                                           |                                   |
|     108 | EMC_FEB_1_EdgeIn         | (-3904.00, 0.00, 12787.89) |                                 |                                           |                                   |
|     109 | EMC_FEB_1_EdgeOut        | (-3904.00, 0.00, 12787.89) |                                 |                                           |                                   |
|     110 | Coll1_pBarCollar_In      | ( 3904.00, 0.00, -3204.49) |                                 |                                           |                                   |
|     111 | Coll1_pBarCollar_Out     | ( 3904.00, 0.00, -3004.51) |                                 |                                           |                                   |
|---------+--------------------------+----------------------------+---------------------------------+-------------------------------------------+-----------------------------------|
* printing the B-field                                                       
  - use [[file:../fcl/dump_virtual_detectors.fcl][murat/fcl/dump_virtual_detectors.fcl]] to dump coordinates of virtual detectors
  - make an input file for B-field printing: file:../test/virtual_detector_xyz.txt
  - use [[file:../fcl/print_bfield.fcl][murat/fcl/print_bfield.fcl]] to print the B-field 3-vectors at virtual detectors
    
#+begin_src
# nominal field in the DS
# id          name                                 X                 Y              Z                 Bx               By              Bz
#--------------------------------------------------------------------------------------------------------------------------------------------
   1 VirtualDetector_Coll1_In                3904.0000000000    0.0000000000 -4003.9900000000   -0.0025684031    0.0000000000    2.6627820894
   2 VirtualDetector_Coll1_Out               3904.0000000000    0.0000000000 -3004.0100000000   -0.0514436042    0.0000000000    2.3321974256
   3 VirtualDetector_Coll31_In                824.9900000000    0.0000000000    -0.0000000000   -2.4372897636    0.0000000000    0.0595295780
   4 VirtualDetector_Coll31_Out                25.0100000000    0.0000000000    -0.0000000000   -2.2343716524    0.0000000000    0.0180883500
   5 VirtualDetector_Coll32_In                -25.0100000000    0.0000000000     0.0000000000   -2.2244502722    0.0000289407    0.0179803125
   6 VirtualDetector_Coll32_Out              -824.9900000000    0.0000000000     0.0000000000   -2.0700230197    0.0000339177    0.0461708289
   7 VirtualDetector_Coll5_In               -3904.0000000000    0.0000000000  2930.0100000000   -0.0821897108    0.0000500107    2.1993556052
   8 VirtualDetector_Coll5_Out              -3904.0000000000    0.0000000000  3929.9900000000   -0.0030307840   -0.0001245775    1.9731178309
   9 VirtualDetector_ST_In                  -3904.0000000000    0.0000000000  5465.9900000000   -0.0008544977   -0.0005116356    1.5943820164
  10 VirtualDetector_ST_Out                 -3904.0000000000    0.0000000000  6276.0100000000   -0.0005017305   -0.0005335732    1.3833431473
  11 VirtualDetector_TT_Mid                 -3904.0000000000    0.0000000000 10181.1000000000   -0.0015904188   -0.0003232212    1.0116345591
  12 VirtualDetector_TT_MidInner            -3904.0000000000    0.0000000000 10181.1000000000   -0.0015904188   -0.0003232212    1.0116345591
  13 VirtualDetector_TT_FrontHollow         -3904.0000000000    0.0000000000  8539.8900000000   -0.0011263300   -0.0007917755    1.0371802289
  14 VirtualDetector_TT_FrontPA             -3904.0000000000    0.0000000000  8539.8900000000   -0.0011263300   -0.0007917755    1.0371802289
  15 VirtualDetector_TT_Back                -3904.0000000000    0.0000000000 11810.1100000000   -0.0010678376   -0.0005711577    0.9929282322
  20 VirtualDetector_PS_FrontExit               0.0000000000    0.0000000000     0.0000000000   -2.2291772215    0.0000287733    0.0180039524
  22 VirtualDetector_TT_OutSurf             -3904.0000000000    0.0000000000 10175.0000000000   -0.0015926470   -0.0003221748    1.0116775003
  23 VirtualDetector_TT_InSurf              -3904.0000000000    0.0000000000 10175.0000000000   -0.0015926470   -0.0003221748    1.0116775003
  35 VirtualDetector_EMFDetectorUpEntrance      0.0000000000    0.0000000000     0.0000000000   -2.2291772215    0.0000287733    0.0180039524
  36 VirtualDetector_EMFDetectorUpExit          0.0000000000    0.0000000000     0.0000000000   -2.2291772215    0.0000287733    0.0180039524
  37 VirtualDetector_Coll5_OutSurf          -3904.0000000000    0.0000000000  3430.0000000000   -0.0086226169    0.0000234102    2.0788249990
  38 VirtualDetector_EMFDetectorDnEntrance      0.0000000000    0.0000000000     0.0000000000   -2.2291772215    0.0000287733    0.0180039524
  39 VirtualDetector_EMFDetectorDnExit          0.0000000000    0.0000000000     0.0000000000   -2.2291772215    0.0000287733    0.0180039524
  73 VirtualDetector_EMC_Disk_0_SurfIn      -3904.0000000000    0.0000000000 11841.9600000000   -0.0010737104   -0.0005660268    0.9926852825
  74 VirtualDetector_EMC_Disk_0_SurfOut     -3904.0000000000    0.0000000000 12230.6300000000   -0.0013546433   -0.0003697791    0.9899068041
  75 VirtualDetector_EMC_Disk_1_SurfIn      -3904.0000000000    0.0000000000 12541.9600000000   -0.0016941340   -0.0001148220    0.9869919108
  76 VirtualDetector_EMC_Disk_1_SurfOut     -3904.0000000000    0.0000000000 12930.6300000000   -0.0018969389    0.0001629506    0.9785150041
  77 VirtualDetector_EMC_Disk_0_EdgeIn      -3904.0000000000    0.0000000000 12036.3000000000   -0.0011714640   -0.0004962072    0.9913129398
  78 VirtualDetector_EMC_Disk_0_EdgeOut     -3904.0000000000    0.0000000000 12036.3000000000   -0.0011714640   -0.0004962072    0.9913129398
  79 VirtualDetector_EMC_Disk_1_EdgeIn      -3904.0000000000    0.0000000000 12736.3000000000   -0.0018444367    0.0000357625    0.9840640593
  80 VirtualDetector_EMC_Disk_1_EdgeOut     -3904.0000000000    0.0000000000 12736.3000000000   -0.0018444367    0.0000357625    0.9840640593
  85 VirtualDetector_STMUpstream            -3904.0000000000    0.0000000000  4881.4900000000   -0.0012258558   -0.0004687852    1.7470265768
  91 VirtualDetector_PSPbarIn                3904.0000000000    0.0000000000 -4145.0200000000   -0.0022102117    0.0000000000    2.7786491861
  92 VirtualDetector_PSPbarOut               3904.0000000000    0.0000000000 -4143.0200000000   -0.0022144854    0.0000000000    2.7769732343
  98 VirtualDetector_TS2_Bend                3046.1200000000   -0.0000000000  -857.8800000000   -1.6199600553    0.0000000000    1.6157083372
  99 VirtualDetector_TS4_Bend               -3046.1200000000    0.0000000000   857.8800000000   -1.5150671370    0.0000506161    1.5100462233
 102 VirtualDetector_EMC_FEB_0_SurfIn       -3904.0000000000    0.0000000000 11912.8500000000   -0.0010974219   -0.0005480711    0.9921702528
 103 VirtualDetector_EMC_FEB_0_SurfOut      -3904.0000000000    0.0000000000 12262.9300000000   -0.0013900603   -0.0003449278    0.9896529937
 104 VirtualDetector_EMC_FEB_1_SurfIn       -3904.0000000000    0.0000000000 12612.8500000000   -0.0017581896   -0.0000576826    0.9860889135
 105 VirtualDetector_EMC_FEB_1_SurfOut      -3904.0000000000    0.0000000000 12962.9300000000   -0.0018945047    0.0001815259    0.9771077025
 106 VirtualDetector_EMC_FEB_0_EdgeIn       -3904.0000000000    0.0000000000 12087.8900000000   -0.0012134397   -0.0004673476    0.9909538625
 107 VirtualDetector_EMC_FEB_0_EdgeOut      -3904.0000000000    0.0000000000 12087.8900000000   -0.0012134397   -0.0004673476    0.9909538625
 108 VirtualDetector_EMC_FEB_1_EdgeIn       -3904.0000000000    0.0000000000 12787.8900000000   -0.0018691091    0.0000720461    0.9829577885
 109 VirtualDetector_EMC_FEB_1_EdgeOut      -3904.0000000000    0.0000000000 12787.8900000000   -0.0018691091    0.0000720461    0.9829577885
 110 VirtualDetector_Coll1_pBarCollar_In     3904.0000000000    0.0000000000 -3204.4900000000   -0.0195587924    0.0000000000    2.3981531470
 111 VirtualDetector_Coll1_pBarCollar_Out    3904.0000000000    0.0000000000 -3004.5100000000   -0.0513226360    0.0000000000    2.3323847498
#+end_src
* ------------------------------------------------------------------------------
* back: file:./AAA_MU2E.org
* ------------------------------------------------------------------------------
