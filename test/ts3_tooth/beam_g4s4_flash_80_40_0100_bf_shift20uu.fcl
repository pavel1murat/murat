# -*- mode:tcl -*-
#------------------------------------------------------------------------------
# Start with particles hitting the detector mother volumes and
# write out StepPoints in the detectors declared as sensitive.
#
# Beam flash particles.
#
# can use for all TS3 tooth configurations with shift20uu field - simulate only DS
#------------------------------------------------------------------------------
#include "JobConfig/cd3/beam/beam_g4s4_flash.fcl"

# 2017-06-07 P.Murat: use standard CD3 geometry + [ beam flash tooth ] + [ modified tracker ] + [shifted TS coils]
# services.GeometryService.inputFile: "Mu2eG4/geom/studies/studyCOL3FlashBlock.txt"
services.GeometryService.inputFile :  "murat/geom/ts3_tooth/geom_tooth_80_40_0100_bf_shift20uu.txt"
services.scheduler.wantSummary: true

# follow changes in the JobConfig/cd3/beam/prolog.fcl

physics : { @table::physics 
    producers : { @table::physics.producers
	g4run : { @table::physics.producers.g4run 
	    SDConfig : { @table::physics.producers.g4run.SDConfig

		enableSD : [ tracker, panelEBKey, calorimeter, calorimeterRO, calorimeterROCard, 
			     calorimeterCrate, virtualdetector ]

		sensitiveVolumes : [ "TTrackerSupportElecG10Upstream", "TTrackerSupportElecG10Downstream" ]
	    }
	}
    }

    filters : { @table::physics.filters 
	detectorFilter : { @table::physics.filters.detectorFilter
	    mainHitInputs: ["g4run:panelEBKey",
			    "g4run:TTrackerSupportElecG10Upstream", 
			    "g4run:TTrackerSupportElecG10Downstream",
			    "g4run:calorimeter", 
			    "g4run:calorimeterRO" , 
			    "g4run:calorimeterROCard", 
			    "g4run:calorimeterCrate"]
	}
    }

    trigger_paths : [ detPath,  g4StatusPath ]
    out           : [ detectorOutput, truncatedEvtsOutput ]
}

outputs.crvOutput.SelectEvents           : [ "crvPath"      ]
outputs.detectorOutput.SelectEvents      : [ "detPath"      ]
outputs.truncatedEvtsOutput.SelectEvents : [ "g4StatusPath" ]
source.fileNames                         : [ "dont_forget_to_set_input_filenames" ]
#------------------------------------------------------------------------------
# this should be it
#------------------------------------------------------------------------------
